/**
Shifty - A teeny tiny tweening engine in JavaScript. 
By Jeremy Kahn - jeremyckahn@gmail.com

  v0.4.10

For instructions on how to use Shifty, please consult the README: https://github.com/jeremyckahn/shifty/blob/master/README.md

MIT Lincense.  This code free to use, modify, distribute and enjoy.

*/

(function(b){function a(a,c){for(var e in a)a.hasOwnProperty(e)&&c(a,e)}function h(l,c){a(c,function(a,c){l[c]=a[c]});return l}function j(l,c){a(c,function(a,c){typeof l[c]==="undefined"&&(l[c]=a[c])});return l}function d(a,c,e){var g,a=(a-c.timestamp)/c.duration;for(g in e.current)e.current.hasOwnProperty(g)&&c.to.hasOwnProperty(g)&&(e.current[g]=f(c.originalState[g],c.to[g],c.easingFunc,a));return e.current}function f(a,c,e,g){return a+(c-a)*e(g)}function k(a,c,e,g){var b;for(b=0;b<c[a].length;b++)c[a][b].apply(e,
g)}function m(l,c,e){a(b.Tweenable.prototype.filter,function(a,g){a[g][l]&&a[g][l].apply(c,e)})}function n(a,c){var e;e=g();e<a.timestamp+a.duration&&c.isTweening?(c.loopId=setTimeout(function(){n(a,c)},1E3/a.owner.fps),m("beforeTween",a.owner,[c.current,a.originalState,a.to]),d(e,a,c),m("afterTween",a.owner,[c.current,a.originalState,a.to]),a.hook.step&&k("step",a.hook,a.owner,[c.current]),a.step.call(c.current)):a.owner.stop(true)}function i(a){a=a||{};this._hook={};this._tweenParams={owner:this,
hook:this._hook,data:{}};this._state={};this._state.current=a.initialState||{};this.fps=a.fps||30;this.easing=a.easing||"linear";this.duration=a.duration||500;return this}var g;g=typeof SHIFTY_DEBUG_NOW==="function"?SHIFTY_DEBUG_NOW:function(){return+new Date};i.prototype.tween=function(a,c,e,b,i){var d,f;if(!this._state.isTweening)return d=this._tweenParams,f=this._state,this._state.loopId=0,this._state.pausedAtTime=null,c?(d.step=function(){},d.to=c||{},d.duration=e||this.duration,d.callback=b||
function(){},d.easing=i||this.easing,f.current=a||{}):(d.step=a.step||function(){},d.callback=a.callback||function(){},d.to=a.to||a.target||{},d.duration=a.duration||this.duration,d.easing=a.easing||this.easing,f.current=a.from||{}),d.timestamp=g(),d.easingFunc=this.formula[d.easing]||this.formula.linear,j(f.current,d.to),j(d.to,f.current),m("tweenCreated",d.owner,[f.current,d.originalState,d.to]),d.originalState=h({},f.current),f.isTweening=true,this.resume(),a.start&&a.start(),this};i.prototype.to=
function(a,c,e,g){typeof c==="undefined"?(a.from=this.get(),this.tween(a)):this.tween(this.get(),a,c,e,g);return this};i.prototype.get=function(){return this._state.current};i.prototype.set=function(a){this._state.current=a||{};return this};i.prototype.stop=function(a){clearTimeout(this._state.loopId);this._state.isTweening=false;a&&(h(this._state.current,this._tweenParams.to),m("afterTweenEnd",this,[this._state.current,this._tweenParams.originalState,this._tweenParams.to]),this._tweenParams.callback.call(this._state.current));
return this};i.prototype.pause=function(){clearTimeout(this._state.loopId);this._state.pausedAtTime=g();this._state.isPaused=true;return this};i.prototype.resume=function(){this._state.isPaused&&(this._tweenParams.timestamp+=g()-this._state.pausedAtTime);n(this._tweenParams,this._state);return this};i.prototype.hookAdd=function(a,c){this._hook.hasOwnProperty(a)||(this._hook[a]=[]);this._hook[a].push(c)};i.prototype.hookRemove=function(a,c){var e;if(this._hook.hasOwnProperty(a))if(c)for(e=this._hook[a].length;e>=
0;e++)this._hook[a][e]===c&&this._hook[a].splice(e,1);else this._hook[a]=[]};i.prototype.filter={};i.util={now:g,each:a,tweenProps:d,tweenProp:f,applyFilter:m,simpleCopy:h,weakCopy:j};i.prototype.formula={linear:function(a){return a}};if(typeof b.Tweenable==="undefined")b.Tweenable=i})(this);
(function(b){b.Tweenable.util.simpleCopy(b.Tweenable.prototype.formula,{easeInQuad:function(a){return Math.pow(a,2)},easeOutQuad:function(a){return-(Math.pow(a-1,2)-1)},easeInOutQuad:function(a){return(a/=0.5)<1?0.5*Math.pow(a,2):-0.5*((a-=2)*a-2)},easeInCubic:function(a){return Math.pow(a,3)},easeOutCubic:function(a){return Math.pow(a-1,3)+1},easeInOutCubic:function(a){return(a/=0.5)<1?0.5*Math.pow(a,3):0.5*(Math.pow(a-2,3)+2)},easeInQuart:function(a){return Math.pow(a,4)},easeOutQuart:function(a){return-(Math.pow(a-
1,4)-1)},easeInOutQuart:function(a){return(a/=0.5)<1?0.5*Math.pow(a,4):-0.5*((a-=2)*Math.pow(a,3)-2)},easeInQuint:function(a){return Math.pow(a,5)},easeOutQuint:function(a){return Math.pow(a-1,5)+1},easeInOutQuint:function(a){return(a/=0.5)<1?0.5*Math.pow(a,5):0.5*(Math.pow(a-2,5)+2)},easeInSine:function(a){return-Math.cos(a*(Math.PI/2))+1},easeOutSine:function(a){return Math.sin(a*(Math.PI/2))},easeInOutSine:function(a){return-0.5*(Math.cos(Math.PI*a)-1)},easeInExpo:function(a){return a==0?0:Math.pow(2,
10*(a-1))},easeOutExpo:function(a){return a==1?1:-Math.pow(2,-10*a)+1},easeInOutExpo:function(a){return a==0?0:a==1?1:(a/=0.5)<1?0.5*Math.pow(2,10*(a-1)):0.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return-(Math.sqrt(1-a*a)-1)},easeOutCirc:function(a){return Math.sqrt(1-Math.pow(a-1,2))},easeInOutCirc:function(a){return(a/=0.5)<1?-0.5*(Math.sqrt(1-a*a)-1):0.5*(Math.sqrt(1-(a-=2)*a)+1)},easeOutBounce:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*
(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},easeInBack:function(a){return a*a*(2.70158*a-1.70158)},easeOutBack:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},easeInOutBack:function(a){var b=1.70158;return(a/=0.5)<1?0.5*a*a*(((b*=1.525)+1)*a-b):0.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},elastic:function(a){return-1*Math.pow(4,-8*a)*Math.sin((a*6-1)*2*Math.PI/2)+1},swingFromTo:function(a){var b=1.70158;return(a/=0.5)<1?0.5*a*a*(((b*=1.525)+1)*a-b):0.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},
swingFrom:function(a){return a*a*(2.70158*a-1.70158)},swingTo:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},bounce:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bouncePast:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?2-(7.5625*(a-=1.5/2.75)*a+0.75):a<2.5/2.75?2-(7.5625*(a-=2.25/2.75)*a+0.9375):2-(7.5625*(a-=2.625/2.75)*a+0.984375)},easeFromTo:function(a){return(a/=0.5)<1?0.5*Math.pow(a,
4):-0.5*((a-=2)*Math.pow(a,3)-2)},easeFrom:function(a){return Math.pow(a,4)},easeTo:function(a){return Math.pow(a,0.25)}})})(this);
(function(b){function a(a,b){return function(){a();b.shift();if(b.length)b[0]();else b.running=false}}function h(a,b,f,h,m,n){return function(){f?a.tween(b,f,h,m,n):(b.callback=m,b.from?a.tween(b):a.to(b))}}b.Tweenable.prototype.queue=function(b,d,f,k,m){if(!this._tweenQueue)this._tweenQueue=[];k=k||b.callback||function(){};k=a(k,this._tweenQueue);this._tweenQueue.push(h(this,b,d,f,k,m));return this};b.Tweenable.prototype.queueStart=function(){if(!this._tweenQueue.running&&this._tweenQueue.length>
0)this._tweenQueue[0](),this._tweenQueue.running=true;return this};b.Tweenable.prototype.queueShift=function(){this._tweenQueue.shift();return this};b.Tweenable.prototype.queuePop=function(){this._tweenQueue.pop();return this};b.Tweenable.prototype.queueEmpty=function(){this._tweenQueue.length=0;return this};b.Tweenable.prototype.queueLength=function(){return this._tweenQueue.length}})(this);
(function(b){function a(a){return parseInt(a,16)}function h(g){b.Tweenable.util.each(g,function(b,c){if(typeof b[c]==="string"&&(k.test(b[c])||m.test(b[c]))){var e;e=b[c];e=e.replace(/#/g,"");e.length===3&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);e=[a(e.substr(0,2)),a(e.substr(2,2)),a(e.substr(4,2))];b[c]="rgb("+e[0]+","+e[1]+","+e[2]+")"}})}function j(a){var l;l=[];b.Tweenable.util.each(a,function(a,b){typeof a[b]==="string"&&(k.test(a[b])||m.test(a[b])||n.test(a[b]))&&l.push(b)});return l}
function d(a,b){var c,e,d;e=b.length;for(c=0;c<e;c++)d=a[b[c]].match(/(\d+)/g),a["__r__"+b[c]]=+d[0],a["__g__"+b[c]]=+d[1],a["__b__"+b[c]]=+d[2],delete a[b[c]]}function f(a,b){var c,e;e=b.length;for(c=0;c<e;c++)a[b[c]]="rgb("+parseInt(a["__r__"+b[c]],10)+","+parseInt(a["__g__"+b[c]],10)+","+parseInt(a["__b__"+b[c]],10)+")",delete a["__r__"+b[c]],delete a["__g__"+b[c]],delete a["__b__"+b[c]]}var k=/^#([0-9]|[a-f]){3}$/i,m=/^#([0-9]|[a-f]){6}$/i,n=/^rgb\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)\s*$/i,i;if(b.Tweenable)b.Tweenable.prototype.filter.color=
{tweenCreated:function(a,b,c){h(a);h(b);h(c)},beforeTween:function(a,b,c){i=j(b);d(a,i);d(b,i);d(c,i)},afterTween:function(a,b,c){f(a,i);f(b,i);f(c,i)}}})(this);
(function(b){function a(a){var f;f={};b.Tweenable.util.each(a,function(a,b){typeof a[b]==="string"&&d.test(a[b])&&(f[b]={suffix:a[b].match(d)[0]})});return f}function h(a,d){b.Tweenable.util.each(d,function(b,d){a[d]=+a[d].replace(f,"")})}function j(a,d){b.Tweenable.util.each(d,function(b,d){a[d]+=b[d].suffix})}var d=/(px|em|%|pc|pt|mm|cm|in|ex)/i,f=/([a-z]|%)/gi,k;b.Tweenable.prototype.filter.token={beforeTween:function(b,d,f){k=a(d);h(b,k);h(d,k);h(f,k)},afterTween:function(a,b,d){j(a,k);j(b,k);
j(d,k)}}})(this);
(function(b){if(b.Tweenable)b.Tweenable.util.interpolate=function(a,h,j,d){var f;if(a&&a.from)h=a.to,j=a.position,d=a.easing,a=a.from;f=b.Tweenable.util.simpleCopy({},a);b.Tweenable.util.applyFilter("tweenCreated",f,[f,a,h]);b.Tweenable.util.applyFilter("beforeTween",f,[f,a,h]);j=b.Tweenable.util.tweenProps(j,{originalState:a,to:h,timestamp:0,duration:1,easingFunc:b.Tweenable.prototype.formula[d]||b.Tweenable.prototype.formula.linear},{current:f});b.Tweenable.util.applyFilter("afterTween",j,[j,a,
h]);return j},b.Tweenable.prototype.interpolate=function(a,h,j){a=b.Tweenable.util.interpolate(this.get(),a,h,j);this.set(a);return a}})(this);
