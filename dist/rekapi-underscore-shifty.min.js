/*! Rekapi - v0.15.6 - 2013-07-26 - http://rekapi.com */
(function(){function t(e,n,r){if(e===n)return 0!==e||1/e==1/n;if(null==e||null==n)return e===n;if(e._chain&&(e=e._wrapped),n._chain&&(n=n._wrapped),e.isEqual&&S.isFunction(e.isEqual))return e.isEqual(n);if(n.isEqual&&S.isFunction(n.isEqual))return n.isEqual(e);var i=c.call(e);if(i!=c.call(n))return!1;switch(i){case"[object String]":return e==n+"";case"[object Number]":return e!=+e?n!=+n:0==e?1/e==1/n:e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object RegExp]":return e.source==n.source&&e.global==n.global&&e.multiline==n.multiline&&e.ignoreCase==n.ignoreCase}if("object"!=typeof e||"object"!=typeof n)return!1;for(var o=r.length;o--;)if(r[o]==e)return!0;r.push(e);var a=0,s=!0;if("[object Array]"==i){if(a=e.length,s=a==n.length)for(;a--&&(s=a in e==a in n&&t(e[a],n[a],r)););}else{if("constructor"in e!="constructor"in n||e.constructor!=n.constructor)return!1;for(var u in e)if(S.has(e,u)&&(a++,!(s=S.has(n,u)&&t(e[u],n[u],r))))break;if(s){for(u in n)if(S.has(n,u)&&!a--)break;s=!a}}return r.pop(),s}var e=this,n=e._,r={},i=Array.prototype,o=Object.prototype,a=Function.prototype,s=i.slice,u=i.unshift,c=o.toString,p=o.hasOwnProperty,h=i.forEach,f=i.map,l=i.reduce,d=i.reduceRight,m=i.filter,y=i.every,v=i.some,_=i.indexOf,g=i.lastIndexOf,k=Array.isArray,w=Object.keys,T=a.bind,S=function(t){return new j(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=S),exports._=S):e._=S,S.VERSION="1.3.3";var x=S.each=S.forEach=function(t,e,n){if(null!=t)if(h&&t.forEach===h)t.forEach(e,n);else if(t.length===+t.length){for(var i=0,o=t.length;o>i;i++)if(i in t&&e.call(n,t[i],i,t)===r)return}else for(var a in t)if(S.has(t,a)&&e.call(n,t[a],a,t)===r)return};S.map=S.collect=function(t,e,n){var r=[];return null==t?r:f&&t.map===f?t.map(e,n):(x(t,function(t,i,o){r[r.length]=e.call(n,t,i,o)}),t.length===+t.length&&(r.length=t.length),r)},S.reduce=S.foldl=S.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),l&&t.reduce===l)return r&&(e=S.bind(e,r)),i?t.reduce(e,n):t.reduce(e);if(x(t,function(t,o,a){i?n=e.call(r,n,t,o,a):(n=t,i=!0)}),!i)throw new TypeError("Reduce of empty array with no initial value");return n},S.reduceRight=S.foldr=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),d&&t.reduceRight===d)return r&&(e=S.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);var o=S.toArray(t).reverse();return r&&!i&&(e=S.bind(e,r)),i?S.reduce(o,e,n,r):S.reduce(o,e)},S.find=S.detect=function(t,e,n){var r;return A(t,function(t,i,o){return e.call(n,t,i,o)?(r=t,!0):void 0}),r},S.filter=S.select=function(t,e,n){var r=[];return null==t?r:m&&t.filter===m?t.filter(e,n):(x(t,function(t,i,o){e.call(n,t,i,o)&&(r[r.length]=t)}),r)},S.reject=function(t,e,n){var r=[];return null==t?r:(x(t,function(t,i,o){e.call(n,t,i,o)||(r[r.length]=t)}),r)},S.every=S.all=function(t,e,n){var i=!0;return null==t?i:y&&t.every===y?t.every(e,n):(x(t,function(t,o,a){return(i=i&&e.call(n,t,o,a))?void 0:r}),!!i)};var A=S.some=S.any=function(t,e,n){e||(e=S.identity);var i=!1;return null==t?i:v&&t.some===v?t.some(e,n):(x(t,function(t,o,a){return i||(i=e.call(n,t,o,a))?r:void 0}),!!i)};S.include=S.contains=function(t,e){var n=!1;return null==t?n:_&&t.indexOf===_?-1!=t.indexOf(e):n=A(t,function(t){return t===e})},S.invoke=function(t,e){var n=s.call(arguments,2);return S.map(t,function(t){return(S.isFunction(e)?e||t:t[e]).apply(t,n)})},S.pluck=function(t,e){return S.map(t,function(t){return t[e]})},S.max=function(t,e,n){if(!e&&S.isArray(t)&&t[0]===+t[0])return Math.max.apply(Math,t);if(!e&&S.isEmpty(t))return-1/0;var r={computed:-1/0};return x(t,function(t,i,o){var a=e?e.call(n,t,i,o):t;a>=r.computed&&(r={value:t,computed:a})}),r.value},S.min=function(t,e,n){if(!e&&S.isArray(t)&&t[0]===+t[0])return Math.min.apply(Math,t);if(!e&&S.isEmpty(t))return 1/0;var r={computed:1/0};return x(t,function(t,i,o){var a=e?e.call(n,t,i,o):t;r.computed>a&&(r={value:t,computed:a})}),r.value},S.shuffle=function(t){var e,n=[];return x(t,function(t,r){e=Math.floor(Math.random()*(r+1)),n[r]=n[e],n[e]=t}),n},S.sortBy=function(t,e,n){var r=S.isFunction(e)?e:function(t){return t[e]};return S.pluck(S.map(t,function(t,e,i){return{value:t,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;return void 0===n?1:void 0===r?-1:r>n?-1:n>r?1:0}),"value")},S.groupBy=function(t,e){var n={},r=S.isFunction(e)?e:function(t){return t[e]};return x(t,function(t,e){var i=r(t,e);(n[i]||(n[i]=[])).push(t)}),n},S.sortedIndex=function(t,e,n){n||(n=S.identity);for(var r=0,i=t.length;i>r;){var o=r+i>>1;n(t[o])<n(e)?r=o+1:i=o}return r},S.toArray=function(t){return t?S.isArray(t)?s.call(t):S.isArguments(t)?s.call(t):t.toArray&&S.isFunction(t.toArray)?t.toArray():S.values(t):[]},S.size=function(t){return S.isArray(t)?t.length:S.keys(t).length},S.first=S.head=S.take=function(t,e,n){return null==e||n?t[0]:s.call(t,0,e)},S.initial=function(t,e,n){return s.call(t,0,t.length-(null==e||n?1:e))},S.last=function(t,e,n){return null==e||n?t[t.length-1]:s.call(t,Math.max(t.length-e,0))},S.rest=S.tail=function(t,e,n){return s.call(t,null==e||n?1:e)},S.compact=function(t){return S.filter(t,function(t){return!!t})},S.flatten=function(t,e){return S.reduce(t,function(t,n){return S.isArray(n)?t.concat(e?n:S.flatten(n)):(t[t.length]=n,t)},[])},S.without=function(t){return S.difference(t,s.call(arguments,1))},S.uniq=S.unique=function(t,e,n){var r=n?S.map(t,n):t,i=[];return 3>t.length&&(e=!0),S.reduce(r,function(n,r,o){return(e?S.last(n)===r&&n.length:S.include(n,r))||(n.push(r),i.push(t[o])),n},[]),i},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=S.intersect=function(t){var e=s.call(arguments,1);return S.filter(S.uniq(t),function(t){return S.every(e,function(e){return S.indexOf(e,t)>=0})})},S.difference=function(t){var e=S.flatten(s.call(arguments,1),!0);return S.filter(t,function(t){return!S.include(e,t)})},S.zip=function(){for(var t=s.call(arguments),e=S.max(S.pluck(t,"length")),n=Array(e),r=0;e>r;r++)n[r]=S.pluck(t,""+r);return n},S.indexOf=function(t,e,n){if(null==t)return-1;var r,i;if(n)return r=S.sortedIndex(t,e),t[r]===e?r:-1;if(_&&t.indexOf===_)return t.indexOf(e);for(r=0,i=t.length;i>r;r++)if(r in t&&t[r]===e)return r;return-1},S.lastIndexOf=function(t,e){if(null==t)return-1;if(g&&t.lastIndexOf===g)return t.lastIndexOf(e);for(var n=t.length;n--;)if(n in t&&t[n]===e)return n;return-1},S.range=function(t,e,n){1>=arguments.length&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,o=Array(r);r>i;)o[i++]=t,t+=n;return o};var C=function(){};S.bind=function(t,e){var n,r;if(t.bind===T&&T)return T.apply(t,s.call(arguments,1));if(!S.isFunction(t))throw new TypeError;return r=s.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,r.concat(s.call(arguments)));C.prototype=t.prototype;var i=new C,o=t.apply(i,r.concat(s.call(arguments)));return Object(o)===o?o:i}},S.bindAll=function(t){var e=s.call(arguments,1);return 0==e.length&&(e=S.functions(t)),x(e,function(e){t[e]=S.bind(t[e],t)}),t},S.memoize=function(t,e){var n={};return e||(e=S.identity),function(){var r=e.apply(this,arguments);return S.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},S.delay=function(t,e){var n=s.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},S.defer=function(t){return S.delay.apply(S,[t,1].concat(s.call(arguments,1)))},S.throttle=function(t,e){var n,r,i,o,a,s,u=S.debounce(function(){a=o=!1},e);return function(){n=this,r=arguments;var c=function(){i=null,a&&t.apply(n,r),u()};return i||(i=setTimeout(c,e)),o?a=!0:s=t.apply(n,r),u(),o=!0,s}},S.debounce=function(t,e,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||t.apply(i,o)};n&&!r&&t.apply(i,o),clearTimeout(r),r=setTimeout(a,e)}},S.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments))}},S.wrap=function(t,e){return function(){var n=[t].concat(s.call(arguments,0));return e.apply(this,n)}},S.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},S.after=function(t,e){return 0>=t?e():function(){return 1>--t?e.apply(this,arguments):void 0}},S.keys=w||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)S.has(t,n)&&(e[e.length]=n);return e},S.values=function(t){return S.map(t,S.identity)},S.functions=S.methods=function(t){var e=[];for(var n in t)S.isFunction(t[n])&&e.push(n);return e.sort()},S.extend=function(t){return x(s.call(arguments,1),function(e){for(var n in e)t[n]=e[n]}),t},S.pick=function(t){var e={};return x(S.flatten(s.call(arguments,1)),function(n){n in t&&(e[n]=t[n])}),e},S.defaults=function(t){return x(s.call(arguments,1),function(e){for(var n in e)null==t[n]&&(t[n]=e[n])}),t},S.clone=function(t){return S.isObject(t)?S.isArray(t)?t.slice():S.extend({},t):t},S.tap=function(t,e){return e(t),t},S.isEqual=function(e,n){return t(e,n,[])},S.isEmpty=function(t){if(null==t)return!0;if(S.isArray(t)||S.isString(t))return 0===t.length;for(var e in t)if(S.has(t,e))return!1;return!0},S.isElement=function(t){return!(!t||1!=t.nodeType)},S.isArray=k||function(t){return"[object Array]"==c.call(t)},S.isObject=function(t){return t===Object(t)},S.isArguments=function(t){return"[object Arguments]"==c.call(t)},S.isArguments(arguments)||(S.isArguments=function(t){return!(!t||!S.has(t,"callee"))}),S.isFunction=function(t){return"[object Function]"==c.call(t)},S.isString=function(t){return"[object String]"==c.call(t)},S.isNumber=function(t){return"[object Number]"==c.call(t)},S.isFinite=function(t){return S.isNumber(t)&&isFinite(t)},S.isNaN=function(t){return t!==t},S.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},S.isDate=function(t){return"[object Date]"==c.call(t)},S.isRegExp=function(t){return"[object RegExp]"==c.call(t)},S.isNull=function(t){return null===t},S.isUndefined=function(t){return void 0===t},S.has=function(t,e){return p.call(t,e)},S.noConflict=function(){return e._=n,this},S.identity=function(t){return t},S.times=function(t,e,n){for(var r=0;t>r;r++)e.call(n,r)},S.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},S.result=function(t,e){if(null==t)return null;var n=t[e];return S.isFunction(n)?n.call(t):n},S.mixin=function(t){x(S.functions(t),function(e){N(e,S[e]=t[e])})};var O=0;S.uniqueId=function(t){var e=O++;return t?t+e:e},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/.^/,I={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var b in I)I[I[b]]=b;var E=/\\|'|\r|\n|\t|\u2028|\u2029/g,M=/\\(\\|'|r|n|t|u2028|u2029)/g,F=function(t){return t.replace(M,function(t,e){return I[e]})};S.template=function(t,e,n){n=S.defaults(n||{},S.templateSettings);var r="__p+='"+t.replace(E,function(t){return"\\"+I[t]}).replace(n.escape||P,function(t,e){return"'+\n_.escape("+F(e)+")+\n'"}).replace(n.interpolate||P,function(t,e){return"'+\n("+F(e)+")+\n'"}).replace(n.evaluate||P,function(t,e){return"';\n"+F(e)+"\n;__p+='"})+"';\n";n.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+r+"return __p;\n";var i=Function(n.variable||"obj","_",r);if(e)return i(e,S);var o=function(t){return i.call(this,t,S)};return o.source="function("+(n.variable||"obj")+"){\n"+r+"}",o},S.chain=function(t){return S(t).chain()};var j=function(t){this._wrapped=t};S.prototype=j.prototype;var D=function(t,e){return e?S(t).chain():t},N=function(t,e){j.prototype[t]=function(){var t=s.call(arguments);return u.call(t,this._wrapped),D(e.apply(S,t),this._chain)}};S.mixin(S),x(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];j.prototype[t]=function(){var n=this._wrapped;e.apply(n,arguments);var r=n.length;return"shift"!=t&&"splice"!=t||0!==r||delete n[0],D(n,this._chain)}}),x(["concat","join","slice"],function(t){var e=i[t];j.prototype[t]=function(){return D(e.apply(this._wrapped,arguments),this._chain)}}),j.prototype.chain=function(){return this._chain=!0,this},j.prototype.value=function(){return this._wrapped}}).call(this),function(t){if("undefined"==typeof SHIFTY_DEBUG_NOW&&(SHIFTY_DEBUG_NOW=function(){return+new Date}),"undefined"==typeof SHIFTY_DEBUG)var t=function(){return this}();var e=function(){"use strict";function e(t,e){var n;for(n in t)Object.hasOwnProperty.call(t,n)&&e(n)}function n(t,n){return e(n,function(e){t[e]=n[e]}),t}function r(t,n){return e(n,function(e){t[e]===void 0&&(t[e]=n[e])}),t}function i(t,e,n,r,i,a,s){var u,c=(t-a)/i;for(u in e)e.hasOwnProperty(u)&&r.hasOwnProperty(u)&&(e[u]=o(n[u],r[u],l[s[u]],c));return e}function o(t,e,n,r){return t+(e-t)*n(r)}function a(t,n,r){var i=c.prototype.filter;e(i,function(e){i[e][n]&&i[e][n].apply(t,r)})}function s(t,e,n,r,o,u,c,p){var h=e+n,l=Math.min(f(),h),d=l>=h;t._isTweening&&(d||(t._loopId=setTimeout(function(){s(t,e,n,r,o,u,c,p)},1e3/t.fps)),a(t,"beforeTween",[r,o,u,c]),i(l,r,o,u,n,e,c),a(t,"afterTween",[r,o,u,c]),p&&p.call(r,r)),(d||!t._isTweening)&&t.stop(!0)}function u(t,n){var r={};return"string"==typeof n?e(t,function(t){r[t]=n}):e(t,function(t){r[t]||(r[t]=n[t]||p)}),r}function c(t){return t=t||{},this.data={},this._currentState=t.initialState||{},this.fps=t.fps||60,this._easing=t.easing||p,this}var p="linear",h=500,f=SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:function(){return+new Date};c.prototype.tween=function(t,e,i,o,s){if(!this._isTweening){if(this._loopId=0,this._pausedAtTime=null,arguments.length>1)this._targetState=e||{},this._duration=i||h,this._callback=o,this._easing=s||p,this._currentState=t||{};else{var c=t;this._step=c.step,this._callback=c.callback,this._targetState=c.to||c.target||{},this._duration=c.duration||h,this._easing=c.easing||p,this._currentState=c.from||{}}this._timestamp=f();var l=this._currentState,d=this._targetState;r(l,d),r(d,l),this._easing=u(l,this._easing);var m=this._originalState=n({},l);return a(this,"tweenCreated",[l,m,d,this._easing]),this._isTweening=!0,this.resume(),t.start&&t.start(),this}},c.prototype.to=function(t,e,n,r){return 1===arguments.length?"to"in t?(t.from=this.get(),this.tween(t)):this.tween(this.get(),t):this.tween(this.get(),t,e,n,r),this},c.prototype.get=function(){return n({},this._currentState)},c.prototype.set=function(t){this._currentState=t},c.prototype.stop=function(t){return clearTimeout(this._loopId),this._isTweening=!1,t&&(n(this._currentState,this._targetState),a(this,"afterTweenEnd",[this._currentState,this._originalState,this._targetState,this._easing]),this._callback&&this._callback.call(this._currentState,this._currentState)),this},c.prototype.pause=function(){return clearTimeout(this._loopId),this._pausedAtTime=f(),this._isPaused=!0,this},c.prototype.resume=function(){return this._isPaused&&(this._timestamp+=f()-this._pausedAtTime),s(this,this._timestamp,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step),this},c.prototype.filter={},n(c,{now:f,each:e,tweenProps:i,tweenProp:o,applyFilter:a,shallowCopy:n,defaults:r,composeEasingObject:u}),c.prototype.formula={linear:function(t){return t}};var l=c.prototype.formula;return"function"==typeof SHIFTY_DEBUG_NOW&&(t.timeoutHandler=s),"object"==typeof exports?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t.Tweenable===void 0&&(t.Tweenable=c),c}();(function(){e.shallowCopy(e.prototype.formula,{easeInQuad:function(t){return Math.pow(t,2)},easeOutQuad:function(t){return-(Math.pow(t-1,2)-1)},easeInOutQuad:function(t){return 1>(t/=.5)?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},easeInCubic:function(t){return Math.pow(t,3)},easeOutCubic:function(t){return Math.pow(t-1,3)+1},easeInOutCubic:function(t){return 1>(t/=.5)?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},easeInQuart:function(t){return Math.pow(t,4)},easeOutQuart:function(t){return-(Math.pow(t-1,4)-1)},easeInOutQuart:function(t){return 1>(t/=.5)?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeInQuint:function(t){return Math.pow(t,5)},easeOutQuint:function(t){return Math.pow(t-1,5)+1},easeInOutQuint:function(t){return 1>(t/=.5)?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2)},easeInSine:function(t){return-Math.cos(t*(Math.PI/2))+1},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},easeInOutExpo:function(t){return 0===t?0:1===t?1:1>(t/=.5)?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-Math.pow(t-1,2))},easeInOutCirc:function(t){return 1>(t/=.5)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeOutBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return 1>(t/=.5)?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},elastic:function(t){return-1*Math.pow(4,-8*t)*Math.sin((6*t-1)*2*Math.PI/2)+1},swingFromTo:function(t){var e=1.70158;return 1>(t/=.5)?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},swingFrom:function(t){var e=1.70158;return t*t*((e+1)*t-e)},swingTo:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},bounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bouncePast:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?2-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?2-(7.5625*(t-=2.25/2.75)*t+.9375):2-(7.5625*(t-=2.625/2.75)*t+.984375)},easeFromTo:function(t){return 1>(t/=.5)?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeFrom:function(t){return Math.pow(t,4)},easeTo:function(t){return Math.pow(t,.25)}})})(),function(){function t(t,n,r,i,o){return e.tweenProps(i,n,t,r,1,0,o)}e.interpolate=function(n,r,i,o){var a,s,u;n&&n.from&&(r=n.to,i=n.position,o=n.easing,n=n.from),u=new e,u.easing=o||"linear",a=e.shallowCopy({},n);var c=e.composeEasingObject(n,u.easing);return e.applyFilter(u,"tweenCreated",[a,n,r,c]),e.applyFilter(u,"beforeTween",[a,n,r,c]),s=t(n,a,r,i,c),e.applyFilter(u,"afterTween",[s,n,r,c]),s},e.prototype.interpolate=function(t,n,r){var i;return i=e.interpolate(this.get(),t,n,r),this.set(i),i}}(),function(t){function e(t,e){var n,r=t.length,i=[];for(n=0;r>n;n++)i.push("_"+e+"_"+n);return i}function n(t){var e=t.match(k);return 1===e.length&&e.unshift(""),e.join(A)}function r(e){t.each(e,function(t){var n=e[t];"string"==typeof n&&n.match(x)&&(e[t]=i(n))})}function i(t){return u(x,t,o)}function o(t){var e=a(t);return"rgb("+e[0]+","+e[1]+","+e[2]+")"}function a(t){return t=t.replace(/#/,""),3===t.length&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),[s(t.substr(0,2)),s(t.substr(2,2)),s(t.substr(4,2))]}function s(t){return parseInt(t,16)}function u(t,e,n){var r=e.match(t),i=e.replace(t,A);if(r)for(var o,a=r.length,s=0;a>s;s++)o=r.shift(),i=i.replace(A,n(o));return i}function c(t){return u(T,t,p)}function p(t){for(var e=t.match(w),n=e.length,r=t.match(S)[0],i=0;n>i;i++)r+=parseInt(e[i],10)+",";return r=r.slice(0,-1)+")"}function h(r){var i={};return t.each(r,function(t){var o=r[t];if("string"==typeof o){var a=v(o);i[t]={formatString:n(o),chunkNames:e(a,t)}}}),i}function f(e,n){t.each(n,function(t){for(var r=e[t],i=v(r),o=i.length,a=0;o>a;a++)e[n[t].chunkNames[a]]=+i[a];delete e[t]})}function l(e,n){t.each(n,function(t){var r=e[t],i=d(e,n[t].chunkNames),o=m(i,n[t].chunkNames);r=y(n[t].formatString,o),e[t]=c(r)})}function d(t,e){for(var n,r={},i=e.length,o=0;i>o;o++)n=e[o],r[n]=t[n],delete t[n];return r}function m(t,e){for(var n=[],r=e.length,i=0;r>i;i++)n.push(t[e[i]]);return n}function y(t,e){for(var n=t,r=e.length,i=0;r>i;i++)n=n.replace(A,+e[i].toFixed(4));return n}function v(t){return t.match(w)}function _(e,n){t.each(n,function(t){for(var r=n[t],i=r.chunkNames,o=i.length,a=e[t].split(" "),s=a[a.length-1],u=0;o>u;u++)e[i[u]]=a[u]||s;delete e[t]})}function g(e,n){t.each(n,function(t){for(var r=n[t],i=r.chunkNames,o=i.length,a="",s=0;o>s;s++)a+=" "+e[i[s]],delete e[i[s]];a=a.substr(1),e[t]=a})}var k=/([^\-0-9\.]+)/g,w=/[0-9.\-]+/g,T=RegExp("rgb\\("+w.source+/,\s*/.source+w.source+/,\s*/.source+w.source+"\\)","g"),S=/^.*\(/,x=/#([0-9]|[a-f]){3,6}/g,A="VAL";t.prototype.filter.token={tweenCreated:function(t,e,n){r(t),r(e),r(n),this._tokenData=h(t)},beforeTween:function(t,e,n,r){_(r,this._tokenData),f(t,this._tokenData),f(e,this._tokenData),f(n,this._tokenData)},afterTween:function(t,e,n,r){l(t,this._tokenData),l(e,this._tokenData),l(n,this._tokenData),g(r,this._tokenData)}}}(e)}(this),function(){function t(t,e,n,r){n.each(t._events[e],function(e){e(t,r)})}function e(t,e){var n=[];e.each(t._actors,function(t){n.push(t.getEnd())}),t._animationLength=Math.max.apply(Math,n)}function n(){}var r=function(n,r,i){"use strict";function o(t,e){var n=Math.floor(e/t._animationLength);return n}function a(t){return g()-t._loopTimestamp}function s(t,e){return e>=t._timesToIterate&&-1!==t._timesToIterate}function u(e,n){s(e,n)&&(e.stop(),t(e,"animationComplete",r))}function c(t,e,n){var r;return r=s(t,n)?t._animationLength:e%t._animationLength}function p(t,e){var n=o(t,e),r=c(t,e,n);t.update(r),u(t,n)}function h(t){p(t,a(t))}function f(t){var e=function(){f(t),h(t)};t._loopId=t._scheduleUpdate.call?t._scheduleUpdate.call(_,e,1e3/t.config.fps):setTimeout(e,1e3/t.config.fps)}function l(t){var e;return e=60!==t?_.setTimeout:_.requestAnimationFrame||_.webkitRequestAnimationFrame||_.oRequestAnimationFrame||_.msRequestAnimationFrame||_.mozCancelRequestAnimationFrame&&_.mozRequestAnimationFrame||_.setTimeout}function d(t){var e;return e=60!==t?_.clearTimeout:_.cancelAnimationFrame||_.webkitCancelAnimationFrame||_.oCancelAnimationFrame||_.msCancelAnimationFrame||_.mozCancelRequestAnimationFrame||_.clearTimeout}function m(t){t._cancelUpdate.call?t._cancelUpdate.call(_,t._loopId):clearTimeout(t._loopId)}function y(t){return this.config=t||{},this.context=this.config.context||{},this._actors={},this._playState=w.STOPPED,this._events={animationComplete:[],playStateChange:[],play:[],pause:[],stop:[],beforeUpdate:[],afterUpdate:[],addActor:[],removeActor:[]},this._timesToIterate=-1,this._animationLength=0,this._loopId=null,this._loopTimestamp=null,this._pausedAtTime=null,this._lastUpdatedMillisecond=0,r.extend(this.config,t),r.defaults(this.config,k),this._scheduleUpdate=l(this.config.fps),this._cancelUpdate=d(this.config.fps),r.each(this._contextInitHook,function(t){t.call(this)},this),this}var v=Function,_=new v("return this")(),g=i.now,k={fps:60},w={STOPPED:"stopped",PAUSED:"paused",PLAYING:"playing"};y.prototype._contextInitHook={},y.prototype.addActor=function(n){return r.contains(this._actors,n)||(n.context()||n.context(this.context),n.kapi=this,n.fps=this.framerate(),this._actors[n.id]=n,e(this,r),n.setup(),t(this,"addActor",r,n)),this},y.prototype.getActor=function(t){return this._actors[t]},y.prototype.getActorIds=function(){return r.pluck(this._actors,"id")},y.prototype.getAllActors=function(){return r.clone(this._actors)},y.prototype.removeActor=function(n){return delete this._actors[n.id],delete n.kapi,n.teardown(),e(this,r),t(this,"removeActor",r,n),this},y.prototype.play=function(e){return m(this),this._playState===w.PAUSED?this._loopTimestamp+=g()-this._pausedAtTime:this._loopTimestamp=g(),this._timesToIterate=e||-1,this._playState=w.PLAYING,f(this),t(this,"playStateChange",r),t(this,"play",r),this},y.prototype.playFrom=function(t,e){return this.play(e),this._loopTimestamp=g()-t,this},y.prototype.playFromCurrent=function(t){return this.playFrom(this._lastUpdatedMillisecond,t)},y.prototype.pause=function(){return this._playState===w.PAUSED?this:(this._playState=w.PAUSED,m(this),this._pausedAtTime=g(),t(this,"playStateChange",r),t(this,"pause",r),this)},y.prototype.stop=function(){return this._playState=w.STOPPED,m(this),r.each(this._actors,function(t){t.stop()}),t(this,"playStateChange",r),t(this,"stop",r),this},y.prototype.isPlaying=function(){return this._playState===w.PLAYING},y.prototype.animationLength=function(){return this._animationLength},y.prototype.lastPositionUpdated=function(){return this._lastUpdatedMillisecond/this._animationLength},y.prototype.actorCount=function(){return r.size(this._actors)},y.prototype.framerate=function(t){return t&&(this.config.fps=t,this._scheduleUpdate=l(this.config.fps),this._cancelUpdate=d(this.config.fps)),this.config.fps},y.prototype.update=function(e){return void 0===e&&(e=this._lastUpdatedMillisecond),t(this,"beforeUpdate",r),r.each(this._actors,function(t){t.updateState(e),"function"==typeof t.update&&t.update(t.context(),t.get())}),this._lastUpdatedMillisecond=e,t(this,"afterUpdate",r),this},y.prototype.on=function(t,e){return this._events[t]?(this._events[t].push(e),this):void 0},y.prototype.off=function(t,e){return this._events[t]?(this._events[t]=e?r.without(this._events[t],e):[],this):void 0},y.prototype.exportTimeline=function(){var t={duration:this._animationLength,actors:{}};return r.each(this._actors,function(e){t.actors[e.id]=e.exportTimeline()},this),t},y.util={},n.Kapi=y},i=function(r,i,o){"use strict";function a(t){return t.sort(function(t,e){return t-e})}function s(t,e){var n,r=t._timelinePropertyCacheIndex,i=r.length;for(n=1;i>n;n++)if(r[n]>=e)return n-1;return-1}function u(t){i.each(t._propertyTracks,function(e,n){t._propertyTracks[n]=i.sortBy(t._propertyTracks[n],function(t){return t.millisecond})})}function c(t){i.each(t._timelinePropertyCaches,function(e,n){var r=p(t,+n);i.defaults(e,r)})}function p(t,e){var n={};return i.each(t._propertyTracks,function(t,r){var o=null;if(i.find(t,function(t){return t.millisecond>e?n[r]=o:t.millisecond===e&&(n[r]=t),o=t,!!n[r]}),!n[r]){var a=i.last(t);a&&e>=a.millisecond&&(n[r]=a)}}),n}function h(t){i.each(t._propertyTracks,function(t){i.each(t,function(e,n){e.linkToNext(t[n+1])})})}function f(t,e,n){return i.find(t._propertyTracks[e],function(t){return t.millisecond===n})}function l(e){e._timelinePropertyCaches={},i.each(e._keyframeProperties,function(t){e._timelinePropertyCaches[t.millisecond]||(e._timelinePropertyCaches[t.millisecond]={}),e._timelinePropertyCaches[t.millisecond][t.name]=t},e),e._timelinePropertyCacheIndex=i.keys(e._timelinePropertyCaches),i.each(e._timelinePropertyCacheIndex,function(t,n){e._timelinePropertyCacheIndex[n]=+t},e),a(e._timelinePropertyCacheIndex),c(e),h(e),e.kapi&&t(e.kapi,"timelineModified",i)}function d(t){u(t),l(t),e(t.kapi,i)}var m="linear",y=r.Kapi;y.Actor=function(t){return t=t||{},o.call(this),i.extend(this,{_propertyTracks:{},_timelinePropertyCaches:{},_timelinePropertyCacheIndex:[],_keyframeProperties:{},id:i.uniqueId(),setup:t.setup||n,update:t.update||n,teardown:t.teardown||n,data:{}}),t.context&&this.context(t.context),this};var v=y.Actor,_=function(){};_.prototype=o.prototype,v.prototype=new _,v.prototype.context=function(t){return t&&(this._context=t),this._context},v.prototype.keyframe=function(t,n,r){var o;return r=r||m,"string"==typeof r&&(o=r,r={},i.each(n,function(t,e){r[e]=o})),i.each(n,function(t,e){r[e]=r[e]||m}),i.each(n,function(e,n){var i=new y.KeyframeProperty(this,t,n,e,r[n]);this._keyframeProperties[i.id]=i,this._propertyTracks[n]||(this._propertyTracks[n]=[]),this._propertyTracks[n].push(i),u(this)},this),this.kapi&&e(this.kapi,i),l(this),this},v.prototype.getKeyframeProperty=function(t,e){return this._propertyTracks[t]&&this._propertyTracks[t][e]?this._propertyTracks[t][e]:void 0},v.prototype.modifyKeyframeProperty=function(t,e,n){return this._propertyTracks[t]&&this._propertyTracks[t][e]&&this._propertyTracks[t][e].modifyWith(n),d(this),this},v.prototype.getTrackNames=function(){return i.keys(this._propertyTracks)},v.prototype.getTrackLength=function(t){return this._propertyTracks[t]?this._propertyTracks[t].length:void 0},v.prototype.copyProperties=function(t,e){var n={},r={};return i.each(this._propertyTracks,function(t,i){var o=f(this,i,e);o&&(n[i]=o.value,r[i]=o.easing)},this),this.keyframe(t,n,r),this},v.prototype.wait=function(t){var e=this.getEnd();if(e>=t)return this;var n=this.getEnd(),r=p(this,this.getEnd()),o={},a={};return i.each(r,function(t,e){o[e]=t.value,a[e]=t.easing}),this.removeKeyframe(n),this.keyframe(n,o,a),this.keyframe(t,o,a),this},v.prototype.getStart=function(t){var e=[];return t?e.push(this._propertyTracks[t][0].millisecond):i.each(this._propertyTracks,function(t){t.length&&e.push(t[0].millisecond)}),0===e.length&&(e=[0]),Math.min.apply(Math,e)},v.prototype.getEnd=function(t){var e=0,n=this._propertyTracks;return t&&(n={},n[t]=this._propertyTracks[t]),i.each(n,function(t){if(t.length){var n=i.last(t).millisecond;n>e&&(e=n)}},this),e},v.prototype.getLength=function(t){return this.getEnd(t)-this.getStart(t)},v.prototype.hasKeyframeAt=function(t,e){var n=this._propertyTracks;if(e){if(!i.has(n,e))return!1;n=i.pick(n,e)}return void 0!==i.find(n,function(e,n){var r=f(this,n,t);return void 0!==r},this)},v.prototype.moveKeyframe=function(t,e){return!this.hasKeyframeAt(t)||this.hasKeyframeAt(e)?!1:(i.each(this._propertyTracks,function(n,r){var i=f(this,r,t);i&&i.modifyWith({millisecond:e})},this),d(this),!0)},v.prototype.modifyKeyframe=function(t,e,n){return n=n||{},i.each(this._propertyTracks,function(r,i){var o=f(this,i,t);o&&o.modifyWith({value:e[i],easing:n[i]})},this),this},v.prototype.removeKeyframe=function(t){return i.each(this._propertyTracks,function(e){var n=-1,r=!1;if(i.find(e,function(e){return n++,r=t===e.millisecond}),r){var o=e.splice(n,1)[0];o&&delete this._keyframeProperties[o.id]}},this),this.kapi&&e(this.kapi,i),l(this),this},v.prototype.removeAllKeyframeProperties=function(){return i.each(this._propertyTracks,function(t){t.length=0},this),this._keyframeProperties={},this.removeKeyframe(0)},v.prototype.updateState=function(t){var e=this.getStart(),n=this.getEnd();if(t=Math.min(n,t),t>=e){var r=s(this,t),o=this._timelinePropertyCaches[this._timelinePropertyCacheIndex[r]],a={};i.each(o,function(e,n){e&&(a[n]=e.getValueAt(t))}),this.set(a)}return this},v.prototype.exportTimeline=function(){var t={start:this.getStart(),end:this.getEnd(),trackNames:this.getTrackNames(),propertyTracks:{}};return i.each(this._propertyTracks,function(e,n){var r=t.propertyTracks[n]=[];i.each(e,function(t){r.push(t.exportPropertyData())})}),t}},o=function(t,e,n){"use strict";var r="linear",i=t.Kapi;i.KeyframeProperty=function(t,n,i,o,a){return this.id=e.uniqueId("keyframeProperty_"),this.ownerActor=t,this.millisecond=n,this.name=i,this.value=o,this.easing=a||r,this.nextProperty=null,this};var o=i.KeyframeProperty;o.prototype.modifyWith=function(t){var n={};e.each(["millisecond","easing","value"],function(e){n[e]=t[e]===void 0?this[e]:t[e]},this),e.extend(this,n)},o.prototype.linkToNext=function(t){this.nextProperty=t||null},o.prototype.getValueAt=function(t){var e,r={},i={};if(this.nextProperty){r[this.name]=this.value,i[this.name]=this.nextProperty.value;var o=this.nextProperty.millisecond-this.millisecond,a=(t-this.millisecond)/o;e=n.interpolate(r,i,a,this.nextProperty.easing)[this.name]}else e=this.value;return e},o.prototype.exportPropertyData=function(){return{id:this.id,millisecond:this.millisecond,name:this.name,value:this.value,easing:this.easing}}},a=function(e,n){"use strict";function r(t,e,n){return n!==void 0&&(t[e]=n,t.style[e]=n+"px"),t[e]}function i(t){t.config.clearOnUpdate&&t.canvas.clear()}function o(e){t(e,"beforeDraw",n);var r,i=e.canvas._drawOrder.length;if(e.canvas._drawOrderSorter){var o=n.sortBy(e.canvas._canvasActors,e.canvas._drawOrderSorter);r=n.pluck(o,"id")}else r=e.canvas._drawOrder;
var a,s,u;for(u=0;i>u;u++)a=e.canvas._canvasActors[r[u]],s=a.context(),a.draw(s,a.get());return t(e,"afterDraw",n),e}function a(t,e){e instanceof u.CanvasActor&&(t.canvas._drawOrder.push(e.id),t.canvas._canvasActors[e.id]=e)}function s(t,e){e instanceof u.CanvasActor&&(t.canvas._drawOrder=n.without(t.canvas._drawOrder,e.id),delete t.canvas._canvasActors[e.id])}var u=e.Kapi;u.prototype._contextInitHook.canvas=function(){this.context.getContext&&(this.canvas=new c(this),this.config.clearOnUpdate=!0,n.extend(this._events,{beforeDraw:[],afterDraw:[]}),n.each(["Height","Width"],function(t){var e=t.toLowerCase();this.config[e]&&(this.canvas[e](this.config[e]),delete this.config[t])},this),this.on("afterUpdate",o),this.on("addActor",a),this.on("removeActor",s),this.on("beforeDraw",i))},u.CanvasRenderer=function(t){return this.kapi=t,this._drawOrder=[],this._drawOrderSorter=null,this._canvasActors={},this};var c=u.CanvasRenderer;c.prototype.height=function(t){return r(this.kapi.context,"height",t)},c.prototype.width=function(t){return r(this.kapi.context,"width",t)},c.prototype.clear=function(){return this.kapi.context.getContext&&this.context().clearRect(0,0,this.width(),this.height()),this.kapi},c.prototype.context=function(){return this.kapi.context.getContext("2d")},c.prototype.moveActorToLayer=function(t,e){return this._drawOrder.length>e?(this._drawOrder=n.without(this._drawOrder,t.id),this._drawOrder.splice(e,0,t.id),t):void 0},c.prototype.setOrderFunction=function(t){return this._drawOrderSorter=t,this.kapi},c.prototype.unsetOrderFunction=function(){return this._drawOrderSorter=null,this.kapi}},s=function(t){"use strict";function e(){}var r=t.Kapi;r.CanvasActor=function(t){return r.Actor.call(this,t),t=t||{},this.draw=t.draw||n,this};var i=r.CanvasActor;e.prototype=r.Actor.prototype,i.prototype=new e,i.prototype.context=function(t){return t&&(this._context=t),this._context&&this._context.getContext("2d")},i.prototype.moveToLayer=function(t){return this.kapi.canvas.moveActorToLayer(this,t)}},u=function(t,e){"use strict";function n(t,e,n){t.style[e]=n}function r(t){return e.contains(c,t)}function i(t,n){var r=[];return e.each(t,function(t){n[t]&&r.push(t+"("+n[t]+")")}),r.join(" ")}function o(t,r){e.each(u,function(e){n(t,e,r)})}function a(){}var s=t.Kapi,u=["transform","webkitTransform","MozTransform","oTransform","msTransform"],c=["translateX","translateY","scale","scaleX","scaleY","rotate","skewX","skewY"];s.DOMActor=function(t,e){s.Actor.call(this,e),this._context=t;var n=this.getCSSName();return this._context.className.match(n)||(this._context.className+=" "+n),this._transformOrder=c.slice(0),delete this.update,delete this.teardown,this};var p=s.DOMActor;a.prototype=s.Actor.prototype,p.prototype=new a,p.prototype.update=function(t,a){var s=e.keys(a),u=e.filter(s,r),c=e.reject(s,r),p=e.pick(a,c);if(u.length){var h=e.pick(a,u),f=i(this._transformOrder,h);o(t,f)}else a.transform&&o(t,a.transform);e.each(p,function(e,r){n(t,r,e)},this)},p.prototype.teardown=function(){var t=this._context.className.match(/\S+/g),n=e.without(t,this.getCSSName());this._context.className=n},p.prototype.getCSSName=function(){return"actor-"+this.id},p.prototype.setTransformOrder=function(t){var n=e.reject(t,r);if(n.length)throw"Unknown or unsupported transform functions: "+n.join(", ");return this._transformOrder=e.uniq(t),this}},c=function(t,e){"use strict";function n(t){return 0===t%1}function r(t,n,r,o){var a=t.getTrackNames(),s=[];e.each(a,function(e){s.push(v(t,r,e))});var u=[];return e.each(a,function(t,e){u.push(i(s[e],n+"-"+t,o))}),u=u.join("\n")}function i(t,n,r){r=r||["w3"];var i=[];return e.each(r,function(e){var r=E(I,[O[e],n,t]),a=o(r,e);i.push(a)}),i.join("\n")}function o(t,e){var n=RegExp(A,"g"),r=O[e]+"transform",i=RegExp(C,"g"),o=O[e],a=t.replace(i,o).replace(n,r);return a}function a(t,n,r,i,o){r=r||["w3"];var a,u=[];e.each(r,function(e){a=s(t,n,e,i,o),u.push(a)});var c=E(b,[n,u.join("\n")]);return c}function s(t,e,n,r,i){var o=[],a=O[n];return o.push(u(t,e,a)),o.push(c(t,a)),o.push(p(t,a)),o.push(h(a)),o.push(f(a)),o.push(l(t.kapi,a,r)),i&&o.push(d(a)),o.join("\n")}function u(t,n,r){var i=E("  %sanimation-name:",[r]),o=t.getTrackNames();return e.each(o,function(t){i+=E(" %s-%s-keyframes,",[n,t])}),i=i.slice(0,i.length-1),i+=";"}function c(t,e){return E("  %sanimation-duration: %sms;",[e,t.getEnd()-t.getStart()])}function p(t,e){return E("  %sanimation-delay: %sms;",[e,t.getStart()])}function h(t){return E("  %sanimation-fill-mode: forwards;",[t])}function f(t){return E("  %sanimation-timing-function: linear;",[t])}function l(t,e,n){var r;r=n?n:-1===t._timesToIterate?"infinite":t._timesToIterate;var i="  %sanimation-iteration-count: %s;";return E(i,[e,r])}function d(t){return E("  %stransform-origin: 0 0;",[t])}function m(t){var e=!1;if(t.nextProperty){var n,r=t.nextProperty.easing.split(" "),i=0,o=r.length,a=r[0];for(i;o>i;i++){if(n=r[i],!P[n]||a!==n){e=!1;break}e=!0,a=n}}return e}function y(t,e,r){var i=[],o=t.name;"transform"===t.name&&(o=A);var a=P[t.nextProperty.easing.split(" ")[0]],s=E("cubic-bezier(%s)",[a]),u=n(e)?e:e.toFixed(2),c=n(r)?r:r.toFixed(2);return i.push(E("  %s% {%s:%s;%sanimation-timing-function: %s;}",[u,o,t.value,C,s])),i.push(E("  %s% {%s:%s;}",[c,o,t.nextProperty.value])),i.join("\n")}function v(t,n,r){var i=[],o=t.getEnd(),a=t.getStart(),s=t.getLength(),u=_(t,r,a);u&&i.push(u);var c=!1;e.each(t._propertyTracks[r],function(e){var r,o,u,p=k(e,a,s),h=e.nextProperty;if(h){r=k(h,a,s);var f=r-p;o=Math.floor(f/100*n)||1,u=f/o}else r=100,o=1,u=1;var l;if(m(e)){if(l=y(e,p,r),c){var d=i.length,v=i[d-1],_=v.split("\n")[0];i[d-1]=_}c=!0}else l=w(t,e,o,u,a,p),c&&l.shift(),l.length&&(l=l.join("\n")),c=!1;l.length&&i.push(l)});var p=g(t,r,a,o);return p&&i.push(p),i.join("\n")}function _(t,e,n){var r=t._propertyTracks[e][0];if(r.millisecond!==n){var i=w(t,r,1,1,r.millisecond,0);return i.join("\n")}}function g(t,n,r,i){var o=e.last(t._propertyTracks[n]);if(o.millisecond!==i){var a=w(t,o,1,1,r,100);return a.join("\n")}}function k(t,e,n){return 100*((t.millisecond-e)/n)}function w(t,e,n,r,i,o){var a,s,u,c=[],p=t.getLength();for(a=0;n>a;a++)s=o+a*r,t.updateState(s/100*p+i),u=+s.toFixed(2)+"% ",c.push("  "+u+T(t,e.name));return c}function T(t,n){var r,i=["{"];if(n){r={};var o=t.get()[n];o!==void 0&&(r[n]=o)}else r=t.get();var a;return e.each(r,function(t,e){a=t;var n=e;"transform"===e&&(n=A),i.push(n+":"+a+";")}),i.push("}"),i.join("")}var S=t.Kapi,x=30,A="TRANSFORM",C="VENDOR",O=S.util.VENDOR_PREFIXES={microsoft:"-ms-",mozilla:"-moz-",opera:"-o-",w3:"",webkit:"-webkit-"},P={linear:".25,.25,.75,.75",easeInQuad:".55,.085,.68,.53",easeInCubic:".55,.055,.675,.19",easeInQuart:".895,.03,.685,.22",easeInQuint:".755,.05,.855,.06",easeInSine:".47,0,.745,.715",easeInExpo:".95,.05,.795,.035",easeInCirc:".6,.04,.98, .335",easeOutQuad:".25,.46,.45,.94",easeOutCubic:".215,.61,.355,1",easeOutQuart:".165,.84,.44,1",easeOutQuint:".23,1,.32,1",easeOutSine:".39,.575,.565,1",easeOutExpo:".19,1,.22,1",easeOutCirc:".075,.82,.165,1",easeInOutQuad:".455,.03,.515,.955",easeInOutCubic:".645,.045,.355,1",easeInOutQuart:".77,0,.175,1",easeInOutQuint:".86,0.07,1",easeInOutSine:".445,.05,.55,.95",easeInOutExpo:"1,0,0,1",easeInOutCirc:".785,.135,.15,.86"},I=["@%skeyframes %s-keyframes {","%s","}"].join("\n"),b=[".%s {","%s","}"].join("\n");S.prototype.toCSS=function(t){t=t||{};var n=[];return e.each(this.getAllActors(),function(e){e instanceof S.DOMActor&&n.push(e.toCSS(t))}),n.join("\n")},S.Actor.prototype.toCSS=function(t){t=t||{};var e=[],n=t.name||this.getCSSName(),i=t.fps||x,o=Math.ceil(this.kapi.animationLength()/1e3*i),s=a(this,n,t.vendors,t.iterations,t.isCentered),u=r(this,n,o,t.vendors);return e.push(s),e.push(u),e.join("\n")};var E=S.util.printf=function(t,n){var r=t;return e.each(n,function(t){r=r.replace("%s",t)}),r}},p=function(t,e,n){"use strict";function r(){var t=document.body.style;return"-webkit-animation"in t?"webkit":"-moz-animation"in t?"mozilla":"-ms-animation"in t?"microsoft":"-o-animation"in t?"opera":"animation"in t?"w3":""}function i(t){var e=document.createElement("style"),n="rekapi-"+a++;return e.id=n,e.innerHTML=t,document.head.appendChild(e),e}var o=t.Kapi;o.prototype._contextInitHook.cssAnimate=function(){this.css=new s(this)};var a=0;o.CSSRenderer=function(t){if(!o.DOMActor&&!o.prototype.toCSS)throw"CSSRenderer requires the DOMActor and toCSS modules.";return this.kapi=t,this._startingTime=0,this._cachedCSS=null,t.on("timelineModified",e.bind(function(){this._cachedCSS=null},this)),this};var s=o.CSSRenderer;o.CSSRenderer.prototype._styleElement=null,s.prototype.canAnimateWithCSS=function(){return!!r()},s.prototype.prerender=function(t,e){return this._cachedCSS=this.kapi.toCSS({vendors:[r()],fps:e,iterations:t})},s.prototype.play=function(t){this.stop();var r=this._cachedCSS||this.prerender.apply(this,arguments);if(this._styleElement=i(r),this._startingTime=n.now(),t){var o=t*this.kapi.animationLength();setTimeout(e.bind(this.stop,this),o)}},s.prototype.stop=function(t){this.isPlaying()&&(document.head.removeChild(this._styleElement),this._styleElement=null,t||this.kapi.update(this.kapi.animationLength()))},s.prototype.isPlaying=function(){return!!this._styleElement}},h=function(t,e){"use strict";var n=e?{}:t,h=e&&e.underscore?e.underscore:n._,f=e&&e.Tweenable?e.Tweenable:n.Tweenable;return r(n,h,f),i(n,h,f),o(n,h,f),"function"==typeof u&&u(n,h,f),"function"==typeof c&&c(n,h,f),"function"==typeof a&&a(n,h,f),"function"==typeof s&&s(n,h,f),"function"==typeof p&&p(n,h,f),n.Kapi};if("function"==typeof define&&define.amd){var f="undefined"!=typeof _;define(["shifty","underscore"],function(t,e){var n=null!=e,r={Tweenable:t,underscore:n?e:_},i=h({},r);return!f&&n&&(this._=void 0),i})}else h(this)}(this);